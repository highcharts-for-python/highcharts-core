[tox]
envlist = py{36,37,38,39,310,311,310_numpy,311_numpy},docs,coverage
minversion = 4.4

[testenv]
usedevelop = True
passenv = TOXENV, CI, TRAVIS, TRAVIS_*, CODECOV*, OPENAI*, ANTHROPIC*
deps = 
    -r requirements.txt
commands =
    pytest {posargs} --openai {env:OPENAI_API_KEY}

[testenv:py]
description =
    py{36,37,38,39,310,311,310_numpy,311_numpy}: Run unit tests against {envname}
commands =
    {[testenv]commands}

[testenv:coverage]
description =
    Run code coverage checks and upload to CodeCov.
setenv =
    PYTEST_ADDOPTS = --cov ./highcharts_core --cov-config {toxinidir}/setup.cfg
allowlist_externals = codecov
commands =
    {[testenv]commands}

[testenv:docs]
description =
    Test whether the documentation builds correctly prior to publication.
basepython = python
changedir = docs
commands =
    sphinx-build -b html . _build/html